[Unit]
Description=Phosphor GPIO %i monitor
Wants=phosphor-pid-control.service
Before=phosphor-pid-control.service
ConditionPathExists=/etc/default/obmc/gpio/%i.conf

[Service]
Restart=always
RestartSec=5
EnvironmentFile=/etc/default/obmc/gpio/%i.conf
ExecStartPre=/bin/sh -c "if [ ! -e ${DEVPATH} ]; then exit; fi"
ExecStart=/usr/bin/phosphor-gpio-monitor --path=${DEVPATH} --key=${KEY} --polarity=${POLARITY} --target=${TARGET} ${EXTRA_ARGS}

[Install]
WantedBy=multi-user.target
